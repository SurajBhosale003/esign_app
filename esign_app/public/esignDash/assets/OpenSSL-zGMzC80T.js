var z=Object.defineProperty,B=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var O=(a,t,o)=>t in a?z(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o,h=(a,t)=>{for(var o in t||(t={}))F.call(t,o)&&O(a,o,t[o]);if(S)for(var o of S(t))A.call(t,o)&&O(a,o,t[o]);return a},g=(a,t)=>B(a,D(t));var C=(a,t,o)=>new Promise((i,x)=>{var y=r=>{try{m(o.next(r))}catch(l){x(l)}},f=r=>{try{m(o.throw(r))}catch(l){x(l)}},m=r=>r.done?i(r.value):Promise.resolve(r.value).then(y,f);m((o=o.apply(a,t)).next())});import{r as p,e as _,h as M,f as T,j as e}from"./index-B_YNSGLD.js";import{Q as H,B as w,Y as N}from"./react-toastify.esm-Dt4eK3tc.js";import{a4 as V}from"./index-CM3UFs-d.js";function J(){const[a,t]=p.useState(!1),[o,i]=p.useState({country:"",state:"",location:"",organization:"",challenge_password:"",countryCode:"",username:"",email:"",openssl_name:""}),[x,y]=p.useState([]),[f,m]=p.useState([]),[r,l]=p.useState(!1),j=_(M),v=_(T);p.useEffect(()=>{i(s=>g(h({},s),{username:j,email:v}));function n(){return C(this,null,function*(){try{const c=(yield(yield fetch("https://restcountries.com/v3.1/all?fields=name,cca2")).json()).map(d=>({name:d.name.common,code:d.cca2})).sort((d,L)=>d.name.localeCompare(L.name));y(c),m(c)}catch(s){w.error("Error fetching countries!",{transition:N})}})}n()},[j,v]);const E=()=>{t(!0)},k=()=>{t(!1),i({country:"",state:"",location:"",organization:"",challenge_password:"",countryCode:"",username:j,email:v,openssl_name:""})},P=()=>C(this,null,function*(){l(!0),console.log(o);try{const s=yield(yield fetch("/api/method/esign_app.api.genrate_and_store_keys",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).json();console.log(s),s.message.status<300?(w.success("OpenSSL created Successfully",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:N}),t(!1),l(!1)):(w.error("Error while creating OpenSSL",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:N}),l(!0))}catch(n){console.error("Error:",n),alert("An error occurred while saving the templete")}l(!1)}),u=n=>{const{name:s,value:b}=n.target;if(!(s==="challenge_password"&&!/^[A-Za-z0-9]*$/.test(b))&&(i(c=>g(h({},c),{[s]:b})),s==="country")){const c=x.find(d=>d.name===b);i(d=>g(h({},d),{countryCode:c?c.code:""}))}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:E,children:"Add OpenSSL"})}),e.jsx(V,{title:"Add Template",open:a,onCancel:k,footer:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{disabled:r,className:"bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:P,children:"Save"},"save-button"),e.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#ca2424] hover:bg-white hover:text-[#ca2424] transition-colors duration-300",onClick:k,children:"Cancel"},"cancel-button")]},"footer-buttons")],children:e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Country"}),e.jsxs("select",{name:"country",value:o.country,onChange:u,className:"bg-[#d1e0e4] text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full appearance-none",children:[e.jsx("option",{value:"",children:"Select Country"}),f.map(n=>e.jsx("option",{value:n.name,children:n.name},n.code))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Country Code"}),e.jsx("input",{type:"text",name:"countryCode",value:o.countryCode,readOnly:!0,className:"bg-gray-200 text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full appearance-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"OpenSSL Name"}),e.jsx("input",{type:"text",name:"openssl_name",value:o.openssl_name,onChange:u,className:"bg-[#d1e0e4] text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full appearance-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"State/Province"}),e.jsx("input",{type:"text",name:"state",value:o.state,onChange:u,className:"bg-[#d1e0e4] text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full appearance-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Location"}),e.jsx("input",{type:"text",name:"location",value:o.location,onChange:u,className:"bg-[#d1e0e4] text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full appearance-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Organization"}),e.jsx("input",{type:"text",name:"organization",value:o.organization,onChange:u,className:"bg-[#d1e0e4] text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full appearance-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Challenge Password"}),e.jsx("input",{type:"text",name:"challenge_password",value:o.challenge_password,onChange:u,placeholder:"Ex. Pass123",className:"bg-[#d1e0e4] text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full appearance-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Username"}),e.jsx("input",{type:"text",name:"username",value:o.username,readOnly:!0,className:"bg-gray-200 text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full appearance-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Email"}),e.jsx("input",{type:"text",name:"email",value:o.email,readOnly:!0,className:"bg-gray-200 text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full appearance-none"})]})]})}),e.jsx(H,{limit:1})]})}function Z(){return e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(J,{})}),e.jsx("div",{}),e.jsx("div",{})]})})}export{Z as default};
