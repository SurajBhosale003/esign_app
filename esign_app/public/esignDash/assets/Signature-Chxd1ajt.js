var L=(t,n,r)=>new Promise((e,a)=>{var s=c=>{try{l(r.next(c))}catch(o){a(o)}},i=c=>{try{l(r.throw(c))}catch(o){a(o)}},l=c=>c.done?e(c.value):Promise.resolve(c.value).then(s,i);l((r=r.apply(t,n)).next())});import{r as S,i as ut,k as nt,l as ht,j as p,c as B,f as at,e as dt}from"./index-SDcol3JM.js";import{I as $,_ as V,M as pt}from"./index-CGE8dmKi.js";import{T as ot,C as it}from"./index-HzQ_g6ug.js";import{Q as ft,B as q,Y as H}from"./react-toastify.esm-Dj3YYmF6.js";var vt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},gt=function(n,r){return S.createElement($,V({},n,{ref:r,icon:vt}))},mt=S.forwardRef(gt),st={exports:{}},z={exports:{}},A,Q;function xt(){if(Q)return A;Q=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return A=t,A}var F,Z;function yt(){if(Z)return F;Z=1;var t=xt();function n(){}function r(){}return r.resetWarningCache=n,F=function(){function e(i,l,c,o,u,g){if(g!==t){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}e.isRequired=e;function a(){return e}var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:a,element:e,elementType:e,instanceOf:a,node:e,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:r,resetWarningCache:n};return s.PropTypes=s,s},F}var tt;function _t(){return tt||(tt=1,z.exports=yt()()),z.exports}/*!
 * Signature Pad v2.3.2
 * https://github.com/szimek/signature_pad
 *
 * Copyright 2017 Szymon Nowak
 * Released under the MIT license
 *
 * The main idea and some parts of the code (e.g. drawing variable width Bézier curve) are taken from:
 * http://corner.squareup.com/2012/07/smoother-signatures.html
 *
 * Implementation of interpolation using cubic Bézier curves is taken from:
 * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript
 *
 * Algorithm for approximated length of a Bézier curve is taken from:
 * http://www.lemoda.net/maths/bezier-length/index.html
 *
 */function R(t,n,r){this.x=t,this.y=n,this.time=r||new Date().getTime()}R.prototype.velocityFrom=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):1};R.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))};R.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.time===t.time};function Y(t,n,r,e){this.startPoint=t,this.control1=n,this.control2=r,this.endPoint=e}Y.prototype.length=function(){for(var t=10,n=0,r=void 0,e=void 0,a=0;a<=t;a+=1){var s=a/t,i=this._point(s,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),l=this._point(s,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(a>0){var c=i-r,o=l-e;n+=Math.sqrt(c*c+o*o)}r=i,e=l}return n};Y.prototype._point=function(t,n,r,e,a){return n*(1-t)*(1-t)*(1-t)+3*r*(1-t)*(1-t)*t+3*e*(1-t)*t*t+a*t*t*t};function bt(t,n,r){var e,a,s,i=null,l=0;r||(r={});var c=function(){l=r.leading===!1?0:Date.now(),i=null,s=t.apply(e,a),i||(e=a=null)};return function(){var o=Date.now();!l&&r.leading===!1&&(l=o);var u=n-(o-l);return e=this,a=arguments,u<=0||u>n?(i&&(clearTimeout(i),i=null),l=o,s=t.apply(e,a),i||(e=a=null)):!i&&r.trailing!==!1&&(i=setTimeout(c,u)),s}}function b(t,n){var r=this,e=n||{};this.velocityFilterWeight=e.velocityFilterWeight||.7,this.minWidth=e.minWidth||.5,this.maxWidth=e.maxWidth||2.5,this.throttle="throttle"in e?e.throttle:16,this.minDistance="minDistance"in e?e.minDistance:5,this.throttle?this._strokeMoveUpdate=bt(b.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=b.prototype._strokeUpdate,this.dotSize=e.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=e.penColor||"black",this.backgroundColor=e.backgroundColor||"rgba(0,0,0,0)",this.onBegin=e.onBegin,this.onEnd=e.onEnd,this._canvas=t,this._ctx=t.getContext("2d"),this.clear(),this._handleMouseDown=function(a){a.which===1&&(r._mouseButtonDown=!0,r._strokeBegin(a))},this._handleMouseMove=function(a){r._mouseButtonDown&&r._strokeMoveUpdate(a)},this._handleMouseUp=function(a){a.which===1&&r._mouseButtonDown&&(r._mouseButtonDown=!1,r._strokeEnd(a))},this._handleTouchStart=function(a){if(a.targetTouches.length===1){var s=a.changedTouches[0];r._strokeBegin(s)}},this._handleTouchMove=function(a){a.preventDefault();var s=a.targetTouches[0];r._strokeMoveUpdate(s)},this._handleTouchEnd=function(a){var s=a.target===r._canvas;s&&(a.preventDefault(),r._strokeEnd(a))},this.on()}b.prototype.clear=function(){var t=this._ctx,n=this._canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,n.width,n.height),t.fillRect(0,0,n.width,n.height),this._data=[],this._reset(),this._isEmpty=!0};b.prototype.fromDataURL=function(t){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=new Image,a=r.ratio||window.devicePixelRatio||1,s=r.width||this._canvas.width/a,i=r.height||this._canvas.height/a;this._reset(),e.src=t,e.onload=function(){n._ctx.drawImage(e,0,0,s,i)},this._isEmpty=!1};b.prototype.toDataURL=function(t){var n;switch(t){case"image/svg+xml":return this._toSVG();default:for(var r=arguments.length,e=Array(r>1?r-1:0),a=1;a<r;a++)e[a-1]=arguments[a];return(n=this._canvas).toDataURL.apply(n,[t].concat(e))}};b.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};b.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};b.prototype.isEmpty=function(){return this._isEmpty};b.prototype._strokeBegin=function(t){this._data.push([]),this._reset(),this._strokeUpdate(t),typeof this.onBegin=="function"&&this.onBegin(t)};b.prototype._strokeUpdate=function(t){var n=t.clientX,r=t.clientY,e=this._createPoint(n,r),a=this._data[this._data.length-1],s=a&&a[a.length-1],i=s&&e.distanceTo(s)<this.minDistance;if(!(s&&i)){var l=this._addPoint(e),c=l.curve,o=l.widths;c&&o&&this._drawCurve(c,o.start,o.end),this._data[this._data.length-1].push({x:e.x,y:e.y,time:e.time,color:this.penColor})}};b.prototype._strokeEnd=function(t){var n=this.points.length>2,r=this.points[0];if(!n&&r&&this._drawDot(r),r){var e=this._data[this._data.length-1],a=e[e.length-1];r.equals(a)||e.push({x:r.x,y:r.y,time:r.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(t)};b.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};b.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};b.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};b.prototype._createPoint=function(t,n,r){var e=this._canvas.getBoundingClientRect();return new R(t-e.left,n-e.top,r||new Date().getTime())};b.prototype._addPoint=function(t){var n=this.points,r=void 0;if(n.push(t),n.length>2){n.length===3&&n.unshift(n[0]),r=this._calculateCurveControlPoints(n[0],n[1],n[2]);var e=r.c2;r=this._calculateCurveControlPoints(n[1],n[2],n[3]);var a=r.c1,s=new Y(n[1],e,a,n[2]),i=this._calculateCurveWidths(s);return n.shift(),{curve:s,widths:i}}return{}};b.prototype._calculateCurveControlPoints=function(t,n,r){var e=t.x-n.x,a=t.y-n.y,s=n.x-r.x,i=n.y-r.y,l={x:(t.x+n.x)/2,y:(t.y+n.y)/2},c={x:(n.x+r.x)/2,y:(n.y+r.y)/2},o=Math.sqrt(e*e+a*a),u=Math.sqrt(s*s+i*i),g=l.x-c.x,m=l.y-c.y,_=u/(o+u),h={x:c.x+g*_,y:c.y+m*_},f=n.x-h.x,x=n.y-h.y;return{c1:new R(l.x+f,l.y+x),c2:new R(c.x+f,c.y+x)}};b.prototype._calculateCurveWidths=function(t){var n=t.startPoint,r=t.endPoint,e={start:null,end:null},a=this.velocityFilterWeight*r.velocityFrom(n)+(1-this.velocityFilterWeight)*this._lastVelocity,s=this._strokeWidth(a);return e.start=this._lastWidth,e.end=s,this._lastVelocity=a,this._lastWidth=s,e};b.prototype._strokeWidth=function(t){return Math.max(this.maxWidth/(t+1),this.minWidth)};b.prototype._drawPoint=function(t,n,r){var e=this._ctx;e.moveTo(t,n),e.arc(t,n,r,0,2*Math.PI,!1),this._isEmpty=!1};b.prototype._drawCurve=function(t,n,r){var e=this._ctx,a=r-n,s=Math.floor(t.length());e.beginPath();for(var i=0;i<s;i+=1){var l=i/s,c=l*l,o=c*l,u=1-l,g=u*u,m=g*u,_=m*t.startPoint.x;_+=3*g*l*t.control1.x,_+=3*u*c*t.control2.x,_+=o*t.endPoint.x;var h=m*t.startPoint.y;h+=3*g*l*t.control1.y,h+=3*u*c*t.control2.y,h+=o*t.endPoint.y;var f=n+o*a;this._drawPoint(_,h,f)}e.closePath(),e.fill()};b.prototype._drawDot=function(t){var n=this._ctx,r=typeof this.dotSize=="function"?this.dotSize():this.dotSize;n.beginPath(),this._drawPoint(t.x,t.y,r),n.closePath(),n.fill()};b.prototype._fromData=function(t,n,r){for(var e=0;e<t.length;e+=1){var a=t[e];if(a.length>1)for(var s=0;s<a.length;s+=1){var i=a[s],l=new R(i.x,i.y,i.time),c=i.color;if(s===0)this.penColor=c,this._reset(),this._addPoint(l);else if(s!==a.length-1){var o=this._addPoint(l),u=o.curve,g=o.widths;u&&g&&n(u,g,c)}}else{this._reset();var m=a[0];r(m)}}};b.prototype._toSVG=function(){var t=this,n=this._data,r=this._canvas,e=Math.max(window.devicePixelRatio||1,1),a=0,s=0,i=r.width/e,l=r.height/e,c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttributeNS(null,"width",r.width),c.setAttributeNS(null,"height",r.height),this._fromData(n,function(v,C,E){var T=document.createElement("path");if(!isNaN(v.control1.x)&&!isNaN(v.control1.y)&&!isNaN(v.control2.x)&&!isNaN(v.control2.y)){var W="M "+v.startPoint.x.toFixed(3)+","+v.startPoint.y.toFixed(3)+" "+("C "+v.control1.x.toFixed(3)+","+v.control1.y.toFixed(3)+" ")+(v.control2.x.toFixed(3)+","+v.control2.y.toFixed(3)+" ")+(v.endPoint.x.toFixed(3)+","+v.endPoint.y.toFixed(3));T.setAttribute("d",W),T.setAttribute("stroke-width",(C.end*2.25).toFixed(3)),T.setAttribute("stroke",E),T.setAttribute("fill","none"),T.setAttribute("stroke-linecap","round"),c.appendChild(T)}},function(v){var C=document.createElement("circle"),E=typeof t.dotSize=="function"?t.dotSize():t.dotSize;C.setAttribute("r",E),C.setAttribute("cx",v.x),C.setAttribute("cy",v.y),C.setAttribute("fill",v.color),c.appendChild(C)});var o="data:image/svg+xml;base64,",u='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+a+" "+s+" "+i+" "+l+'"')+(' width="'+i+'"')+(' height="'+l+'"')+">",g=c.innerHTML;if(g===void 0){var m=document.createElement("dummy"),_=c.childNodes;m.innerHTML="";for(var h=0;h<_.length;h+=1)m.appendChild(_[h].cloneNode(!0));g=m.innerHTML}var f="</svg>",x=u+g+f;return o+btoa(x)};b.prototype.fromData=function(t){var n=this;this.clear(),this._fromData(t,function(r,e){return n._drawCurve(r,e.start,e.end)},function(r){return n._drawDot(r)}),this._data=t};b.prototype.toData=function(){return this._data};const wt=Object.freeze(Object.defineProperty({__proto__:null,default:b},Symbol.toStringTag,{value:"Module"})),Ct=ut(wt);var I={exports:{}},et;function Pt(){return et||(et=1,function(t,n){(function(r,e){t.exports=e()})(nt,function(){return function(r){function e(s){if(a[s])return a[s].exports;var i=a[s]={exports:{},id:s,loaded:!1};return r[s].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var a={};return e.m=r,e.c=a,e.p="",e(0)}([function(r,e){function a(o){var u=o.getContext("2d"),g=o.width,m=o.height,_=u.getImageData(0,0,g,m).data,h=l(!0,g,m,_),f=l(!1,g,m,_),x=c(!0,g,m,_),v=c(!1,g,m,_),C=v-x+1,E=f-h+1,T=u.getImageData(x,h,C,E);return o.width=C,o.height=E,u.clearRect(0,0,C,E),u.putImageData(T,0,0),o}function s(o,u,g,m){return{red:m[4*(g*u+o)],green:m[4*(g*u+o)+1],blue:m[4*(g*u+o)+2],alpha:m[4*(g*u+o)+3]}}function i(o,u,g,m){return s(o,u,g,m).alpha}function l(o,u,g,m){for(var _=o?1:-1,h=o?0:g-1,f=h;o?f<g:f>-1;f+=_)for(var x=0;x<u;x++)if(i(x,f,u,m))return f;return null}function c(o,u,g,m){for(var _=o?1:-1,h=o?0:u-1,f=h;o?f<u:f>-1;f+=_)for(var x=0;x<g;x++)if(i(f,x,u,m))return f;return null}Object.defineProperty(e,"__esModule",{value:!0}),e.default=a}])})}(I)),I.exports}(function(t,n){(function(r,e){t.exports=e(_t(),S,Ct,Pt())})(nt,function(r,e,a,s){return function(i){function l(o){if(c[o])return c[o].exports;var u=c[o]={exports:{},id:o,loaded:!1};return i[o].call(u.exports,u,u.exports,l),u.loaded=!0,u.exports}var c={};return l.m=i,l.c=c,l.p="",l(0)}([function(i,l,c){function o(w){return w&&w.__esModule?w:{default:w}}function u(w,y){var D={};for(var P in w)y.indexOf(P)>=0||Object.prototype.hasOwnProperty.call(w,P)&&(D[P]=w[P]);return D}function g(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function m(w,y){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!y||typeof y!="object"&&typeof y!="function"?w:y}function _(w,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);w.prototype=Object.create(y&&y.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(w,y):w.__proto__=y)}Object.defineProperty(l,"__esModule",{value:!0});var h=Object.assign||function(w){for(var y=1;y<arguments.length;y++){var D=arguments[y];for(var P in D)Object.prototype.hasOwnProperty.call(D,P)&&(w[P]=D[P])}return w},f=function(){function w(y,D){for(var P=0;P<D.length;P++){var d=D[P];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(y,d.key,d)}}return function(y,D,P){return D&&w(y.prototype,D),P&&w(y,P),y}}(),x=c(1),v=o(x),C=c(2),E=o(C),T=c(3),W=o(T),lt=c(4),ct=o(lt),U=function(w){function y(){var D,P,d,G;g(this,y);for(var X=arguments.length,J=Array(X),k=0;k<X;k++)J[k]=arguments[k];return P=d=m(this,(D=y.__proto__||Object.getPrototypeOf(y)).call.apply(D,[this].concat(J))),d._sigPad=null,d._excludeOurProps=function(){var j=d.props,O=(j.canvasProps,j.clearOnResize,u(j,["canvasProps","clearOnResize"]));return O},d.getCanvas=function(){return d._canvas},d.getTrimmedCanvas=function(){var j=document.createElement("canvas");return j.width=d._canvas.width,j.height=d._canvas.height,j.getContext("2d").drawImage(d._canvas,0,0),(0,ct.default)(j)},d.getSignaturePad=function(){return d._sigPad},d._checkClearOnResize=function(){d.props.clearOnResize&&d._resizeCanvas()},d._resizeCanvas=function(){var j=d.props.canvasProps||{},O=j.width,K=j.height;if(!O||!K){var M=d._canvas,N=Math.max(window.devicePixelRatio||1,1);O||(M.width=M.offsetWidth*N),K||(M.height=M.offsetHeight*N),M.getContext("2d").scale(N,N),d.clear()}},d.on=function(){return window.addEventListener("resize",d._checkClearOnResize),d._sigPad.on()},d.off=function(){return window.removeEventListener("resize",d._checkClearOnResize),d._sigPad.off()},d.clear=function(){return d._sigPad.clear()},d.isEmpty=function(){return d._sigPad.isEmpty()},d.fromDataURL=function(j,O){return d._sigPad.fromDataURL(j,O)},d.toDataURL=function(j,O){return d._sigPad.toDataURL(j,O)},d.fromData=function(j){return d._sigPad.fromData(j)},d.toData=function(){return d._sigPad.toData()},G=P,m(d,G)}return _(y,w),f(y,[{key:"componentDidMount",value:function(){this._sigPad=new W.default(this._canvas,this._excludeOurProps()),this._resizeCanvas(),this.on()}},{key:"componentWillUnmount",value:function(){this.off()}},{key:"componentDidUpdate",value:function(){Object.assign(this._sigPad,this._excludeOurProps())}},{key:"render",value:function(){var D=this,P=this.props.canvasProps;return E.default.createElement("canvas",h({ref:function(d){D._canvas=d}},P))}}]),y}(C.Component);U.propTypes={velocityFilterWeight:v.default.number,minWidth:v.default.number,maxWidth:v.default.number,minDistance:v.default.number,dotSize:v.default.oneOfType([v.default.number,v.default.func]),penColor:v.default.string,throttle:v.default.number,onEnd:v.default.func,onBegin:v.default.func,canvasProps:v.default.object,clearOnResize:v.default.bool},U.defaultProps={clearOnResize:!0},l.default=U},function(i,l){i.exports=r},function(i,l){i.exports=e},function(i,l){i.exports=a},function(i,l){i.exports=s}])})})(st);var St=st.exports;const Dt=ht(St),{TabPane:rt}=ot,jt=({onSave:t,onUpload:n})=>{const r=S.useRef(null),[e,a]=S.useState(!1),[s,i]=S.useState(null),l=()=>{if(r.current){const h=r.current.toDataURL();t(h),a(!1)}},c=()=>{r.current&&r.current.clear()},o=h=>{var x;const f=(x=h.target.files)==null?void 0:x[0];if(f){const v=new FileReader;v.onloadend=()=>{const C=v.result;i(C),n(C)},v.readAsDataURL(f)}_()},u=h=>{h.preventDefault()},g=h=>{var x;h.preventDefault();const f=(x=h.dataTransfer.files)==null?void 0:x[0];if(f){const v=new FileReader;v.onloadend=()=>{const C=v.result;i(C),n(C)},v.readAsDataURL(f)}},m=()=>{a(!0)},_=()=>{a(!1)};return p.jsxs(p.Fragment,{children:[p.jsx("div",{children:p.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:m,children:"Add Signature"})}),p.jsx(pt,{title:"Draw Your Signature",open:e,onCancel:_,footer:[,],children:p.jsxs(ot,{defaultActiveKey:"1",children:[p.jsxs(rt,{tab:"Draw Signature",children:[p.jsx(Dt,{ref:r,penColor:"black",canvasProps:{width:470,height:200,className:"sigCanvas"}}),p.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:c,children:"Clear Signature"},"clear"),p.jsx("button",{className:"ml-2 bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:l,children:"Save Signature"},"save")]},"1"),p.jsx(rt,{tab:"Upload Signature",children:p.jsx("div",{className:"w-full h-80 border-2 border-dashed border-gray-300 flex items-center justify-center text-gray-400 hover:bg-gray-100 hover:text-gray-600 hover:border-gray-400 rounded-lg",onDragOver:u,onDrop:g,children:p.jsxs("label",{className:"cursor-pointer",children:[p.jsx("input",{type:"file",accept:".png, .jpg, .jpeg",className:"hidden",onChange:o}),"Drag & Drop or Click to Upload"]})})},"2")]})})]})};var Tt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},Et=function(n,r){return S.createElement($,V({},n,{ref:r,icon:Tt}))},Ot=S.forwardRef(Et),Rt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},Mt=function(n,r){return S.createElement($,V({},n,{ref:r,icon:Rt}))},kt=S.forwardRef(Mt);const{Meta:Nt}=it,Lt=({refreshSignatures:t,setRefreshSignatures:n})=>{const r=B(at),[e,a]=S.useState([]),[s,i]=S.useState(!0),[l,c]=S.useState(null),o=S.useRef(null);S.useEffect(()=>{(r||t)&&L(void 0,null,function*(){try{const f=yield fetch(`/api/method/esign_app.api.get_signatures?user_mail=${r}`,{method:"GET",headers:{"Content-Type":"application/json"}}),x=yield f.json();// // console.log("API Response:",x),f.status===200?(a(x.message.data),i(!1)):(c(x.message.data.toString()),i(!1))}catch(f){c("An error occurred while fetching signatures"),i(!1)}})},[r,t]);function u(){q.error("Deleted successfully",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:H})}function g(){q.error("Failed to delete signature",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:H})}const m=h=>L(void 0,null,function*(){try{const x=yield(yield fetch(`/api/method/esign_app.api.cancel_and_delete_esignature?user_mail=${r}&name=${h}`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();// // console.log("Delete API Response:",x),x.message.status===200?(u(),a(e.filter(v=>v.name!==h)),n(!0)):(g(),console.error("Failed to delete signature:",x.message))}catch(f){g(),console.error("Error deleting signature:",f)}}),_=h=>{if(o.current){const{scrollLeft:f,clientWidth:x,scrollWidth:v}=o.current,C=h==="left"?Math.max(f-x,0):Math.min(f+x,v-x);o.current.scrollTo({left:C,behavior:"smooth"})}};return s?p.jsx("div",{children:"Loading..."}):l?p.jsxs("div",{children:["Error: ",l]}):p.jsxs("div",{className:"relative mt-6 min-w-[1000px] max-w-[1000px] mx-auto pl-10 pr-10",children:[e.length>=3&&p.jsxs(p.Fragment,{children:[p.jsx("button",{className:"scroll-button left absolute left-0 top-1/2 transform -translate-y-1/2 bg-white border border-gray-300 rounded-full shadow-md p-2 cursor-pointer z-10",onClick:()=>_("left"),children:p.jsx(Ot,{})}),p.jsx("button",{className:"scroll-button right absolute right-0 top-1/2 transform -translate-y-1/2 bg-white border border-gray-300 rounded-full shadow-md p-2 cursor-pointer z-10",onClick:()=>_("right"),children:p.jsx(kt,{})})]}),p.jsx("div",{className:"flex gap-4 overflow-x-auto whitespace-nowrap scrollbar-hide",ref:o,children:e.map((h,f)=>p.jsx("div",{className:"inline-block",children:p.jsx(it,{style:{width:300},cover:p.jsx("img",{className:"mt-10 h-30",alt:`Signature ${f}`,src:h.sign_blob}),actions:[p.jsx(mt,{onClick:()=>m(h.name)},"delete")],children:p.jsx(Nt,{title:h.sign_name,description:new Date(h.creation).toLocaleString()})})},f))}),p.jsx(ft,{limit:1})]})};function It(){const[t,n]=S.useState(null),[r,e]=S.useState(null),[a,s]=S.useState(null),[i,l]=S.useState(!1),c=B(dt),o=B(at),u=h=>{l(!1),n(h),e(null)},g=h=>{s(h.target.value)},m=()=>L(this,null,function*(){const h={signature_data:t||r,signature_name:a,user_full_name:c,user_email:o};try{const x=yield(yield fetch("/api/method/esign_app.api.save_signature",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)})).json();x.message.status<300?(q.success("Sign Created Successfully",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:H}),e(null),n(null),s(""),l(!0)):alert("Error saving signature: "+x.message)}catch(f){console.error("Error:",f),alert("An error occurred while saving the signature")}}),_=h=>{l(!1),e(h),n(null)};return p.jsxs("div",{className:"max-w-lg mx-auto mt-8",children:[p.jsx(jt,{onSave:u,onUpload:_}),t&&p.jsxs("div",{className:"bg-gray-200 p-4 mt-4",children:[p.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Signature Preview"}),p.jsx("img",{src:t,alt:"Signature",style:{maxWidth:"100%",height:"90px"},className:"border border-gray-300 rounded"}),p.jsxs("div",{className:"flex items-center space-x-2 mt-2 gap-1",children:[p.jsx("input",{type:"text",className:"border rounded px-4 py-2 h-10 focus:outline-none",placeholder:"Name of Signature",value:a||"",onChange:g}),p.jsx("button",{onClick:m,className:"bg-white text-[#283C42] px-4 py-2 rounded border-2 border-[#283C42] hover:bg-[#283C42] hover:text-white hover:border-transparent transition-colors duration-300",children:"Save Signature"})]})]}),r&&!t&&p.jsxs("div",{className:"bg-gray-200 p-4 mt-4",children:[p.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Uploaded Image Preview"}),p.jsx("img",{src:r,alt:"Uploaded Image",style:{maxWidth:"100%",height:"auto"},className:"border border-gray-300 rounded"}),p.jsxs("div",{className:"flex items-center space-x-2 mt-2 gap-1",children:[p.jsx("input",{type:"text",className:"border rounded px-4 py-2 focus:outline-none",placeholder:"Name of Signature",onChange:g}),p.jsx("button",{onClick:m,className:"bg-white text-[#283C42] px-4 py-2 rounded border-2 border-[#283C42] hover:bg-[#283C42] hover:text-white hover:border-transparent transition-colors duration-300",children:"Save Signature"})]})]}),p.jsx(Lt,{refreshSignatures:i,setRefreshSignatures:l})]})}export{It as default};
