var rt=Object.defineProperty,lt=Object.defineProperties;var dt=Object.getOwnPropertyDescriptors;var ke=Object.getOwnPropertySymbols;var ct=Object.prototype.hasOwnProperty,ut=Object.prototype.propertyIsEnumerable;var Te=(h,u,n)=>u in h?rt(h,u,{enumerable:!0,configurable:!0,writable:!0,value:n}):h[u]=n,H=(h,u)=>{for(var n in u||(u={}))ct.call(u,n)&&Te(h,n,u[n]);if(ke)for(var n of ke(u))ut.call(u,n)&&Te(h,n,u[n]);return h},J=(h,u)=>lt(h,dt(u));var E=(h,u,n)=>new Promise((j,d)=>{var f=S=>{try{y(n.next(S))}catch(U){d(U)}},C=S=>{try{y(n.throw(S))}catch(U){d(U)}},y=S=>S.done?j(S.value):Promise.resolve(S.value).then(f,C);y((n=n.apply(h,u)).next())});import{e as ce,f as Ee,r as o,k as gt,j as t,l as ht,u as pt,M as mt}from"./index-mMcdbbvq.js";import{B as ee,Y as te,Q as ft}from"./react-toastify.esm-SEpWC5Jn.js";import{B as xt,P as bt,a as Oe,S as yt,r as V,b as Z,c as b}from"./BlankPDF-Ddv_LtDs.js";import{S as _t}from"./SignPad-BXJeiNDi.js";import{a4 as vt}from"./index-C6WT9_kl.js";import{T as Ie}from"./index-Dm-DcEXU.js";import{e as St}from"./extractUniqueElements-Cb8tlYgU.js";import{d as de}from"./dayjsConfig-Bwel-uW4.js";import{C as jt}from"./ConfirmDeleteModal-D1qqXaD9.js";import"./___vite-browser-external_commonjs-proxy-D80mF6fv.js";import"./index-BsSPGaKC.js";const{TabPane:Pe}=Ie,wt=({onSelect:h,onClickbtn:u})=>{const n=ce(Ee);o.useRef(null);const[j,d]=o.useState(!1),[f,C]=o.useState(null),[y,S]=o.useState(null),[U,_]=o.useState([]),[N,M]=o.useState(null),[R,W]=o.useState(!1),se=ce(gt),[ae,$]=o.useState("1"),D=g=>{W(!1),M(g),C(null)},G=g=>{S(g.target.value)},ne=()=>E(void 0,null,function*(){const g={signature_data:N||f,signature_name:y,user_full_name:se,user_email:n};try{const z=yield(yield fetch("/api/method/esign_app.api.save_signature",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)})).json();z.message.status<300?(ee.success("Sign Created Successfully",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:te}),C(null),M(null),S(""),W(!0)):alert("Error saving signature: "+z.message)}catch(v){console.error("Error:",v),alert("An error occurred while saving the signature")}$("1")}),k=g=>{W(!1),C(g),M(null)};o.useEffect(()=>{(n||R)&&E(void 0,null,function*(){try{const v=yield fetch(`/api/method/esign_app.api.get_signatures?user_mail=${n}`,{method:"GET",headers:{"Content-Type":"application/json"}}),z=yield v.json();v.status===200&&(_(z.message.data),console.log(`++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
`,z.message.data))}catch(v){}})},[n,R]);const oe=()=>{d(!0),u()},F=()=>{d(!1)},ie=(g,v)=>{h(g,v),F()};return t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"bg-[#283C42] w-full text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:oe,children:"Sign"}),t.jsx(vt,{title:"Signature List",open:j,onCancel:F,footer:[,],width:"70vw",children:t.jsx("div",{className:"min-h-[60vh]",children:t.jsxs(Ie,{activeKey:ae,onChange:$,children:[t.jsx(Pe,{tab:"All Signatures",children:t.jsx("div",{className:"all-sign-div",children:U.map((g,v)=>t.jsxs("div",{className:"card",onClick:()=>ie(g.sign_blob,g.cert_pem),children:[t.jsx("img",{alt:`Signature ${v}`,src:g.sign_blob,className:"card__image"}),t.jsxs("div",{className:"card__content",children:[t.jsx("p",{className:"card__title",children:g.sign_name}),t.jsx("p",{className:"card__description",children:new Date(g.creation).toLocaleString()})]})]},v))})},"1"),t.jsxs(Pe,{tab:"New Signature",children:[t.jsx(_t,{onSave:D,onUpload:k}),N&&t.jsxs("div",{className:"bg-gray-200 p-4 mt-4",children:[t.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Signature Preview"}),t.jsx("img",{src:N,alt:"Signature",style:{maxWidth:"100%",height:"90px"},className:"border border-gray-300 rounded"}),t.jsxs("div",{className:"flex items-center space-x-2 mt-2 gap-1",children:[t.jsx("input",{type:"text",className:"border rounded px-4 py-2 h-10 focus:outline-none",placeholder:"Name of Signature",value:y||"",onChange:G}),t.jsx("button",{onClick:ne,className:"bg-white text-[#283C42] px-4 py-2 rounded border-2 border-[#283C42] hover:bg-[#283C42] hover:text-white hover:border-transparent transition-colors duration-300",children:"Save Signature"})]})]}),f&&!N&&t.jsxs("div",{className:"bg-gray-200 p-4 mt-4",children:[t.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Uploaded Image Preview"}),t.jsx("img",{src:f,alt:"Uploaded Image",style:{maxWidth:"100%",height:"auto"},className:"border border-gray-300 rounded"}),t.jsxs("div",{className:"flex items-center space-x-2 mt-2 gap-1",children:[t.jsx("input",{type:"text",className:"border rounded px-4 py-2 focus:outline-none",placeholder:"Name of Signature",onChange:G}),t.jsx("button",{onClick:ne,className:"bg-white text-[#283C42] px-4 py-2 rounded border-2 border-[#283C42] hover:bg-[#283C42] hover:text-white hover:border-transparent transition-colors duration-300",children:"Save Signature"})]})]})]},"2")]})})})]})},Ht=()=>{var me,fe;const[h,u]=o.useState(!1),[n,j]=o.useState([]),[d,f]=o.useState(null),[C,y]=o.useState(null),[S,U]=o.useState("");o.useState("");const[_,N]=o.useState(0),[M,R]=o.useState(null),[W,se]=o.useState([]),[ae,$]=o.useState(!1),[D,G]=o.useState(xt),[ne,k]=o.useState(null),oe=o.useRef(null),F=o.useRef(null),ie=o.useRef(null),g=ht(),[v,z]=o.useState([]),[K,Y]=o.useState(0),{documentData:p}=g.state||{},re=ce(Ee),ue=pt();if(!p)return console.log("No document data",JSON.stringify(p)),t.jsx("p",{children:"Document not found"});o.useEffect(()=>{var e;if(d!==null){const s=n.find(a=>a.id===d);k(s?{id:s.id,type:s.type,checked:(e=s.checked)!=null?e:!1,content:s.content}:null)}},[d,C,n]),o.useEffect(()=>{console.log("Fetch Data before if useEffect  --->>>>>"),K||(console.log("Fetch Data Inside if isCompleted --->>>>>"),E(void 0,null,function*(){try{console.log("Fetch Data Inside function inside try --->>>>>");const s=yield fetch(`/api/method/esign_app.api.get_assigned_users_list_check?user_document_name=${p.name}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(s.ok){console.log("response Is OK --->>>>>");const a=yield s.json();se(a.message.data.assigned_users||[]);const r=JSON.parse(a.message.data.assigned_users);console.log("here is Assigned user List data",r);const l={unseen:0,open:0,close:0};if(Object.values(r).forEach(m=>{m.status in l&&l[m.status]++}),console.log(l,"-------------------->IMG Count-------------"),l.unseen>0){Y(0);return}if(l.open>0){Y(0);return}l.open+l.unseen==0&&(Y(1),Ue())}else console.error("Error fetching data:",s.statusText)}catch(s){console.error("Fetch error:",s)}finally{}}))},[]);const Ue=()=>E(void 0,null,function*(){console.log("inside updateDocumentStatus");try{const e=yield fetch(`/api/method/esign_app.api.update_document_status_confirm?user_document_name=${p.name}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(e.ok){console.log("inside updateDocumentStatus ------------> OK");const s=yield e.json();console.log(s.message,"Document status updated successfully.",K)}}catch(e){console.error("Fetch error:",e)}finally{}});o.useEffect(()=>{E(void 0,null,function*(){try{const a=yield(yield fetch(`/api/method/esign_app.api.get_document_components_and_basepdf?document_name=${p?p.name:""}`)).json();if(console.log(a),a.message.document_json_data==null||a.message.base_pdf_datad==null)return;if(a.message.status===200){Y(a.message.iscompleted);const r=typeof a.message.document_json_data=="string"?JSON.parse(a.message.document_json_data):a.message.document_json_data,l=typeof a.message.base_pdf_datad=="string"?JSON.parse(a.message.base_pdf_datad):a.message.base_pdf_datad,m=typeof a.message.assigned_users=="string"?JSON.parse(a.message.assigned_users):a.message.assigned_users;R(m),console.log("User Status Document list ------------------>",m);try{for(let T in m)if(m.hasOwnProperty(T)){const x=m[T];if(x.email===re){if(console.log(`Email found at index ${T}, status: ${x.status}`),x.status==="unseen"){x.status="open",m[T]=x,R(m);const le={document_title:p.name,assigned_user_list:JSON.stringify(m)};try{const L=yield(yield fetch("/api/method/esign_app.api.patch_user_status_document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(le)})).json();console.log(JSON.stringify(L)),L.message.status<300}catch(I){console.error("Error:",I)}}else x.status==="close"&&(u(!0),console.log(`Status: ${x.status}`));break}}}catch(T){}console.log("Parrsed data : ",r),j(r),G(l)}}catch(s){console.error("Error:",s)}}),ge()},[]);const ge=()=>{const e=St(n);z(e)};o.useEffect(()=>{ge()},[n]),o.useEffect(()=>{var e;if(d!==null){const s=n.find(a=>a.id===d);k(s?{id:s.id,type:s.type,checked:(e=s.checked)!=null?e:!1,content:s.content}:null)}},[d,C,n]);const ze=()=>{_<D.length-1&&(N(_+1),y(null),f(null))},Ae=()=>E(void 0,null,function*(){console.log("inside Submit Final Doc");const e={document_title:p.name,document_json_data:JSON.stringify(n)};console.log(e);try{const a=yield(yield fetch("/api/method/esign_app.api.submit_final_document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();console.log(JSON.stringify(a)),a.message.status<300?($e(),ee.success("Document Submitted Successfully",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:te}),setTimeout(()=>{ue("/inbox")},1500)):ee.error("Error Submitting Document...",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:te})}catch(s){ee.error("Server Error, Please Try Again...",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:te})}}),He=()=>{$(!1)},Me=()=>{Ae(),$(!1)},Re=()=>{$(!0)},$e=()=>{if(M){const e=H({},M);let s=!1;Object.keys(e).forEach(a=>{e[a].email===re&&e[a].status==="open"&&(e[a].status="close",s=!0,R(e),console.log("Updated data of assigned users:",e),Fe(e))}),s||console.log('No matching user with "open" status found.')}},Fe=e=>E(void 0,null,function*(){const s={document_title:p.name,assigned_user_list:JSON.stringify(e)};try{const r=yield(yield fetch("/api/method/esign_app.api.patch_user_status_document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();console.log("API response:",r)}catch(a){console.error("Error sending data to API:",a)}}),Be=()=>{_>0&&(N(_-1),y(null),f(null))},Je=(e,s)=>{j(a=>a.map(r=>r.id===d?J(H({},r),{content:e,value:e,cert_pem:s}):r)),y(null),f(null),k(null),console.log(`________________________________
`,s)},he=()=>{y(null)},Le=(e,s)=>{const a=e.target.checked;j(r=>r.map(l=>l.id===s?J(H({},l),{checked:a}):l))},Ve=(e,s)=>{const a=e.target.value;j(r=>r.map(l=>l.id===s?J(H({},l),{content:a,value:a}):l))},We=e=>{const s=e.target.value;d!==null&&j(a=>a.map(r=>r.id===d?J(H({},r),{content:s,value:s}):r))},Ge=e=>{e.target.closest(".component")||(f(null),y(null))};o.useEffect(()=>{if(d!==null){const e=document.querySelector(`[data-id="${d}"]`);y(e);const s=n.find(a=>a.id===d);(s==null?void 0:s.type)==="text"&&U(s.content||"")}},[d,n]),o.useEffect(()=>{if(d!==null){const e=n.find(s=>s.id===d);k(e?{id:e.id,type:e.type,checked:e.checked||!1,content:e.content||""}:null)}},[d,C,n]);const pe=e=>Uint8Array.from(atob(e),s=>s.charCodeAt(0)),Ke=(e,s)=>{var r;const a=(r=e.target.files)==null?void 0:r[0];if(a){const l=new FileReader;l.onloadend=()=>{const m=l.result;j(T=>T.map(x=>x.id===s?J(H({},x),{content:m}):x))},l.readAsDataURL(a)}},Ye=()=>E(void 0,null,function*(){var L,xe,be,ye,_e,ve,Se,je;const e=yield Oe.create(),s=yield e.embedFont(yt.TimesRoman);for(let c=0;c<D.length;c++){const O=pe(D[c].data),q=yield Oe.load(O);(yield e.copyPages(q,q.getPageIndices())).forEach(A=>e.addPage(A))}const a=n.reduce((c,O)=>(c[O.pageNo]||(c[O.pageNo]=[]),c[O.pageNo].push(O),c),{}),r=e.getPages();for(const c of r){const O=r.indexOf(c),q=a[O]||[];for(const i of q){const{left:A,top:Q}=i.position;if(i.type==="text"||i.type==="v_text"){const w=(L=i.fontSize)!=null?L:12,P=c.getHeight()-Q-w-3;c.drawText(i.content||"",{x:A+3,y:P,size:w,color:V(0,0,0),lineHeight:w*1.2,maxWidth:(be=(xe=i.size)==null?void 0:xe.width)!=null?be:0,font:s})}else if((i.type==="image"||i.type==="v_image"||i.type==="v_signature"||i.type==="signature")&&i.content){const w=i.content.split(",")[1];if(!w){console.error("Invalid image data");continue}if(i.type==="signature"){const at=i.name||"Unknown",nt=new Date().toISOString(),ot=Z.of(`Certificate: ${i.cert_pem}
Signer: ${at}
SignedAt: ${nt}`),it=e.context.obj({Type:b.of("Annot"),Subtype:b.of("Widget"),T:Z.of(`Signature_${O}_${i.name}`),Contents:ot,Rect:[0,0,0,0],P:c.ref,F:4});let X=c.node.lookup(b.of("Annots"));X||(X=e.context.obj([]),c.node.set(b.of("Annots"),X)),X.push(it),c.node.set(b.of("Group"),e.context.obj({Type:b.of("Group"),S:b.of("Transparency"),CS:b.of("DeviceRGB")})),console.log(`Certificate embedded as annotation for ${i.name}`)}const P=pe(w);let B;if(i.content.startsWith("data:image/png"))B=yield e.embedPng(P);else if(i.content.startsWith("data:image/jpeg")||i.content.startsWith("data:image/jpg"))B=yield e.embedJpg(P);else{console.error("Unsupported image format");continue}const{width:we,height:Ce}=B,qe=(_e=(ye=i.size)==null?void 0:ye.width)!=null?_e:0,Qe=(Se=(ve=i.size)==null?void 0:ve.height)!=null?Se:0,Xe=qe/we,Ze=Qe/Ce,Ne=Math.min(Xe,Ze),et=we*Ne,De=Ce*Ne,tt=A,st=c.getHeight()-Q-De;c.drawImage(B,{x:tt,y:st,width:et,height:De})}else if(i.type==="checkbox"){const P=c.getHeight()-Q-10-5;i.checked?c.drawRectangle({x:A+5,y:P,width:10,height:10,color:V(0,0,0)}):c.drawRectangle({x:A+5,y:P,width:10,height:10,borderColor:V(0,0,0),borderWidth:1,color:V(1,1,1)})}else if(i.type==="m_date"||i.type==="live_date"||i.type==="fix_date"){const w=(je=i.fontSize)!=null?je:12,P=c.getHeight()-Q-w-3,B=i.content||new Date().toLocaleDateString();c.drawText(B,{x:A+3,y:P,size:w,color:V(0,0,0),font:s})}}}e.catalog.set(b.of("OutputIntent"),e.context.obj({Type:b.of("OutputIntent"),S:b.of("GTS_PDFA1"),OutputConditionIdentifier:Z.of("sRGB IEC61966-2.1"),Info:Z.of("sRGB IEC61966-2.1")}));const l=e.context.obj({Type:b.of("Metadata"),Subtype:b.of("XML"),Length:0});e.catalog.set(b.of("Metadata"),l),e.setTitle("Document signed by eSign"),e.setAuthor("Dexciss Technology"),e.setSubject("eSign"),e.setKeywords(["Dexciss Technology","eSign"]),e.setCreationDate(new Date),e.setModificationDate(new Date);const m=yield e.save(),T=new Blob([m],{type:"application/pdf"}),x=URL.createObjectURL(T),le=`esignDoc-${p.document_title}`,I=document.createElement("a");I.href=x,I.download=`${le}.pdf`,document.body.appendChild(I),I.click(),document.body.removeChild(I),URL.revokeObjectURL(x)});return p?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"text-xs flex items-center gap-3 relative p-6 bg-[#283C42] text-white border-2 border-transparent hover:border-[#283C42] transition-colors duration-300",children:[t.jsx("div",{children:t.jsx("button",{className:"button",onClick:()=>ue(-1),children:t.jsxs("div",{className:"button-box",children:[t.jsx("span",{className:"button-elem",children:t.jsx("svg",{viewBox:"0 0 46 40",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M46 20.038c0-.7-.3-1.5-.8-2.1l-16-17c-1.1-1-3.2-1.4-4.4-.3-1.2 1.1-1.2 3.3 0 4.4l11.3 11.9H3c-1.7 0-3 1.3-3 3s1.3 3 3 3h33.1l-11.3 11.9c-1 1-1.2 3.3 0 4.4 1.2 1.1 3.3.8 4.4-.3l16-17c.5-.5.8-1.1.8-1.9z"})})}),t.jsx("span",{className:"button-elem",children:t.jsx("svg",{viewBox:"0 0 46 40",children:t.jsx("path",{d:"M46 20.038c0-.7-.3-1.5-.8-2.1l-16-17c-1.1-1-3.2-1.4-4.4-.3-1.2 1.1-1.2 3.3 0 4.4l11.3 11.9H3c-1.7 0-3 1.3-3 3s1.3 3 3 3h33.1l-11.3 11.9c-1 1-1.2 3.3 0 4.4 1.2 1.1 3.3.8 4.4-.3l16-17c.5-.5.8-1.1.8-1.9z"})})})]})})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold ",style:{fontVariant:"small-caps"},children:p.document_title}),t.jsx("p",{className:"text-xs",children:p.template_title}),t.jsxs("p",{className:"text-xs",children:["Email: ",p.owner_email]}),t.jsxs("p",{className:"text-sm",children:["Created At: ",de(p.document_created_at).format("DD/MM/YYYY - HH:mm")," (",de().to(de(p.document_created_at)),")"]})]})]}),t.jsxs("div",{className:`${h?"":"templete-main-div-signer"} `,children:[t.jsxs("div",{className:"templete-app text-xs",children:[t.jsxs("div",{className:"flex gap-3 mb-2",children:[t.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 min-w-[5rem] max-w-[5rem] rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:Be,disabled:_===0,children:"Previous"}),t.jsxs("h1",{className:"mt-2",children:[_+1," / ",D.length]}),t.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 rounded border-2 min-w-[5rem] max-w-[5rem] border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:ze,disabled:_===D.length-1,children:"Next"}),K==1&&t.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 rounded border-2  border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:Ye,children:t.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",height:"1.7em",width:"1.7em",children:t.jsx("path",{d:"M7 10a1 1 0 101 1 1 1 0 00-1-1zm12-4h-1V3a1 1 0 00-1-1H7a1 1 0 00-1 1v3H5a3 3 0 00-3 3v6a3 3 0 003 3h1v3a1 1 0 001 1h10a1 1 0 001-1v-3h1a3 3 0 003-3V9a3 3 0 00-3-3zM8 4h8v2H8zm8 16H8v-4h8zm4-5a1 1 0 01-1 1h-1v-1a1 1 0 00-1-1H7a1 1 0 00-1 1v1H5a1 1 0 01-1-1V9a1 1 0 011-1h14a1 1 0 011 1z"})})}),h&&K==0&&t.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 cursor-not-allowed rounded border-2  border-transparent transition-colors duration-300",disabled:_===D.length-1,children:t.jsx("svg",{"data-name":"Layer 1",viewBox:"0 0 24 24",fill:"currentColor",height:"1.7em",width:"1.7em",children:t.jsx("path",{d:"M7 10a1 1 0 101 1 1 1 0 00-1-1zM3.71 2.29a1 1 0 00-1.42 1.42L4.62 6A3 3 0 002 9v6a3 3 0 003 3h1v3a1 1 0 001 1h10a1 1 0 001-1v-1.59l2.29 2.3a1 1 0 001.42 0 1 1 0 000-1.42zM6 15v1H5a1 1 0 01-1-1V9a1 1 0 011-1h1.59l6 6H7a1 1 0 00-1 1zm10 5H8v-4h6.59L16 17.41zm3-14h-1V3a1 1 0 00-1-1H8.66a1 1 0 000 2H16v2h-3.34a1 1 0 000 2H19a1 1 0 011 1v6a.37.37 0 010 .11 1 1 0 00.78 1.18h.2a1 1 0 001-.8A2.84 2.84 0 0022 15V9a3 3 0 00-3-3z"})})})]}),t.jsxs("div",{className:"workspace",ref:F,onClick:Ge,children:[t.jsx(bt,{pdfData:D[_].data}),n.filter(e=>e.pageNo===_).map(e=>{var s,a,r,l;return t.jsxs("div",{"data-id":e.id,className:` ${e.type} ${d===e.id?"selected":""}`,style:{position:"absolute",top:e.position.top,left:e.position.left,width:(a=(s=e.size)==null?void 0:s.width)!=null?a:0,height:(l=(r=e.size)==null?void 0:r.height)!=null?l:0,border:d===e.id?"1px solid red":"none",fontSize:`${e.fontSize}px`,userSelect:"none",overflow:"hidden"},onClick:m=>{m.stopPropagation(),f(e.id)},children:[e.type==="text"&&t.jsx("div",{style:{width:"100%",height:"100%",overflow:"hidden",fontSize:"inherit",outline:"none"},children:e.value||"Text Here"}),e.type==="image"&&!e.content&&t.jsx("div",{}),e.type==="v_image"&&!e.content&&t.jsx("div",{}),(e.type==="image"||e.type==="v_image"||e.type==="signature"||e.type==="v_signature")&&e.content&&t.jsx("img",{src:e.content,alt:"Uploaded",style:{width:"100%",height:"100%"}}),e.type==="checkbox"&&t.jsx("input",{type:"checkbox",checked:e.checked||!1,readOnly:!0}),e.type==="m_date"&&t.jsx("input",{type:"date",value:e.content||"",readOnly:!0}),e.type==="live_date"&&t.jsx("input",{type:"date",value:new Date().toISOString().split("T")[0],readOnly:!0}),e.type==="fix_date"&&t.jsx("input",{type:"date",value:e.content||"",readOnly:!0}),e.type==="v_text"&&t.jsx("div",{children:e.content||"Editable Text"})]},e.id)}),t.jsx(mt,{ref:oe,bounds:{left:0,top:0,right:((me=F.current)==null?void 0:me.offsetWidth)||0,bottom:((fe=F.current)==null?void 0:fe.offsetHeight)||0}})]})]}),t.jsxs("div",{className:`right-div-signer p-5 cursor-pointer ${h?"hidden":""}`,children:[t.jsxs("div",{className:"w-full max-w-4xl bg-white rounded-lg shadow-md overflow-hidden ",children:[t.jsx("button",{onClick:Re,className:"bg-[#283C42] text-white px-4 py-2 mb-4  border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",children:"Submit"}),t.jsxs("table",{className:"w-full signer-table ",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-[#283C42] text-white",children:[t.jsx("th",{className:"py-3 px-4 text-left",children:"Sr."}),t.jsx("th",{className:"py-3 px-4 text-left",children:"Component"}),t.jsx("th",{className:"py-3 px-4 text-left",children:"Page No."}),t.jsx("th",{className:"py-3 px-4 text-left",children:"Input"})]})}),t.jsx("tbody",{children:n.filter(e=>{var s;return(s=e.assign)==null?void 0:s.includes(re)}).map((e,s)=>t.jsxs("tr",{className:`${d===e.id?"selected-row bg-blue-100":""} ${s%2===0?"bg-gray-50":"bg-white"}`,onClick:()=>{f(e.id),N(e.pageNo),he()},children:[t.jsx("td",{className:"py-2 px-4 border-b border-gray-200",children:s+1}),t.jsx("td",{className:"py-2 px-4 border-b border-gray-200",onClick:()=>{f(e.id)},children:e.name}),t.jsx("td",{className:"py-2 px-4 border-b border-gray-200",children:e.pageNo+1}),t.jsxs("td",{className:"py-2 px-4 border-b border-gray-200 max-w-[18vw]",children:[e.type==="signature"&&t.jsx(wt,{onSelect:Je,onClickbtn:he}),e.type==="image"&&t.jsx("input",{type:"file",accept:"image/*",onChange:a=>Ke(a,e.id)}),e.type==="checkbox"&&t.jsx("input",{type:"checkbox",checked:e.checked||!1,onChange:a=>Le(a,e.id)}),(e.type==="m_date"||e.type==="fix_date")&&t.jsx("input",{type:"date",value:e.content||"",onChange:a=>Ve(a,e.id)}),e.type==="live_date"&&t.jsx("input",{type:"date",value:new Date().toISOString().split("T")[0],readOnly:!0}),e.type==="text"&&t.jsx("input",{className:"bg-[#d1e0e4] text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full appearance-none",ref:ie,type:"text",value:e.content||"",onClick:()=>{f(e.id),N(e.pageNo)},onChange:We,placeholder:"Edit text here"})]})]},e.id))})]})]}),t.jsx(jt,{visible:ae,name:p.name,onCancel:He,onConfirm:Me,message:"Are you sure you want to submit this document? After That You Can't Change or Edit Document !",module:"Document Submit"})]})]}),t.jsx(ft,{limit:1})]}):t.jsx("div",{children:"No Doc data available"})};export{Ht as default};
