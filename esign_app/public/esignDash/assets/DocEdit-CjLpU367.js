var Xe=Object.defineProperty,Ze=Object.defineProperties;var et=Object.getOwnPropertyDescriptors;var Ne=Object.getOwnPropertySymbols;var tt=Object.prototype.hasOwnProperty,st=Object.prototype.propertyIsEnumerable;var _e=(c,d,i)=>d in c?Xe(c,d,{enumerable:!0,configurable:!0,writable:!0,value:i}):c[d]=i,v=(c,d)=>{for(var i in d||(d={}))tt.call(d,i)&&_e(c,i,d[i]);if(Ne)for(var i of Ne(d))st.call(d,i)&&_e(c,i,d[i]);return c},y=(c,d)=>Ze(c,et(d));var U=(c,d,i)=>new Promise((_,E)=>{var C=w=>{try{f(i.next(w))}catch(S){E(S)}},I=w=>{try{f(i.throw(w))}catch(S){E(S)}},f=w=>w.done?_(w.value):Promise.resolve(w.value).then(C,I);f((i=i.apply(c,d)).next())});import{r as u,u as De,j as t,i as at,M as it}from"./index-CvZQwJ2C.js";import{B as Y,Y as q,Q as nt}from"./react-toastify.esm-ZhgozERE.js";import{u as rt,b as ot,a as lt,B as dt,p as ct,s as ht,P as Se,r as V}from"./ButtonUtilities-2aW2mLhg.js";import{d as ut,P as gt,S as xt}from"./SignInput-DEPTeOoI.js";import{a4 as pt}from"./index-DvmFvQBp.js";import{e as mt}from"./extractUniqueElements-Cb8tlYgU.js";import{d as le}from"./dayjsConfig-mt5fgA8Q.js";import"./SignPad-Cykf-Qrt.js";import"./index-LZEUtR-U.js";import"./index-jeq-OB0o.js";function ft({owner_email:c,assigned_user:d,template_tite:i,document_title:_,setTarget:E}){const[C,I]=u.useState(!1),[f,w]=u.useState({}),[S,k]=u.useState(""),[O,H]=u.useState(`${_}-(${i})`),[J,o]=u.useState(""),[R,se]=u.useState(0),N=De();u.useEffect(()=>{const p=d.reduce((T,M,L)=>(T[L]={email:M,status:"unseen"},T),{});w(p)},[d]);const ae=p=>{se(p.target.checked?1:0)},ie=p=>{H(p.target.value)},Q=p=>{o(p.target.value)},ne=()=>{if(S&&!Object.values(f).some(p=>p.email===S)){const p=Object.keys(f).length;w(y(v({},f),{[p]:{email:S,status:"unseen"}})),k("")}},b=p=>{const T=Object.keys(f).filter(M=>f[parseInt(M)].email!==p).reduce((M,L,oe)=>(M[oe]=f[parseInt(L)],M),{});w(T)},re=()=>{E(null),I(!0)},G=()=>U(this,null,function*(){I(!1);const p={to:JSON.stringify(f,null,2),subject:O,body:J,document_name:_,user_mail:c,isChecked:R};try{(yield(yield fetch("/api/method/esign_app.api.send_document_data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).json()).message.status<300?(Y.success("Document Assigned Successfully",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:q}),setTimeout(()=>{N("/documents")},2e3)):Y.error("Error While Sending Document...",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:q})}catch(T){Y.error("Server Error, Please Try Again...",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:q})}});return t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:re,children:"Send Document"}),t.jsx(pt,{title:"Send Document",open:C,onCancel:()=>I(!1),footer:null,width:"100vh",children:t.jsxs("div",{className:"bg-[#283C42] text-white p-6 rounded-md shadow-md max-w-lg mx-auto",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-xs font-semibold mb-1",children:"From:"}),t.jsx("input",{type:"email",value:c,disabled:!0,className:"w-full px-3 py-2 rounded bg-gray-300 text-gray-700 cursor-not-allowed text-xs"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-xs font-semibold mb-1",children:"To:"}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("input",{type:"email",placeholder:"Add email",value:S,onChange:p=>k(p.target.value),className:"w-full px-3 py-2 rounded bg-white text-black text-xs"}),t.jsx("button",{type:"button",onClick:ne,className:"bg-[#283C42] text-white px-3 py-2 rounded text-xs font-semibold",children:"Add"})]}),t.jsx("div",{className:"mt-2 max-h-24 overflow-y-auto",children:t.jsx("ul",{children:Object.keys(f).map(p=>t.jsxs("li",{className:"flex justify-between items-center bg-white text-black text-xs px-3 py-2 rounded mb-1",children:[t.jsx("span",{children:f[parseInt(p)].email}),t.jsx("button",{type:"button",onClick:()=>b(f[parseInt(p)].email),className:"text-red-500 text-xs font-semibold",children:"Remove"})]},p))})})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-xs font-semibold mb-1",children:"Title:"}),t.jsx("input",{type:"text",value:O,onChange:ie,className:"w-full px-3 py-2 rounded bg-white text-black text-xs"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-xs font-semibold mb-1",children:"Description:"}),t.jsx("textarea",{onChange:Q,rows:6,className:"w-full px-3 py-2 rounded bg-white text-black text-xs"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",className:"form-checkbox text-[#283C42] rounded",checked:R===1,onChange:ae}),t.jsx("label",{className:"ml-2 text-xs",children:"Freeze"})]}),t.jsx("button",{type:"submit",onClick:G,className:"bg-white text-[#283C42] px-4 py-2 rounded-md font-semibold text-xs",children:"Send"})]})]})})]})}const zt=()=>{var pe,me,fe,be;const[c,d]=u.useState([]),[i,_]=u.useState(null),[E,C]=u.useState(null),[I,f]=u.useState(""),[w,S]=u.useState(""),[k,O]=u.useState(0);u.useState(null);const[H,J]=u.useState(ut),[o,R]=u.useState(null),se=u.useRef(null),N=u.useRef(null),ae=u.useRef(null),ie=at(),[Q,ne]=u.useState([]),{documentData:b}=ie.state||{},re=De();if(!b)return t.jsx("p",{children:"Document not found"});u.useEffect(()=>{var e;if(i!==null){const a=c.find(s=>s.id===i);R(a?{id:a.id,type:a.type,checked:(e=a.checked)!=null?e:!1,content:a.content}:null)}},[i,E,c]),u.useEffect(()=>{U(void 0,null,function*(){try{const s=yield(yield fetch(`/api/method/esign_app.api.get_document_components_and_basepdf?document_name=${b?b.name:""}`)).json();if(s.message.document_json_data==null||s.message.base_pdf_datad==null)return;if(s.message.status===200){const n=typeof s.message.document_json_data=="string"?JSON.parse(s.message.document_json_data):s.message.document_json_data,r=typeof s.message.base_pdf_datad=="string"?JSON.parse(s.message.base_pdf_datad):s.message.base_pdf_datad;d(n),J(r)}}catch(a){console.error("Error:",a)}}),G()},[]);const G=()=>{const e=mt(c);ne(e)};u.useEffect(()=>{G()},[c]);const p={name:"editable",props:[],events:[],render(e,a){const s=e.getRect(),{pos2:n}=e.state,r=e.useCSS("div",`
        {
            position: absolute;
            left: 0px;
            top: 0px;
            will-change: transform;
            transform-origin: 0px 0px;
        }
        .custom-button {
            width: 24px;
            height: 24px;
            margin-bottom: 4px;
            background: #283C42;
            border-radius: 4px;
            appearance: none;
            border: 0;
            color: white;
            font-weight: bold;
        }
            `);return t.jsxs(r,{className:"moveable-editable",style:{transform:`translate(${n[0]}px, ${n[1]}px) rotate(${s.rotation}deg) translate(10px)`},children:[t.jsx("button",{className:"w-6 h-6 mb-1 p-1 bg-[#283C42] rounded border-none text-white font-bold",onClick:ge,children:t.jsx("svg",{viewBox:"0 0 1024 1024",fill:"currentColor",height:"1em",width:"1em",children:t.jsx("path",{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"})})}),t.jsx("button",{className:"w-6 h-6 mb-1 p-1 bg-[#283C42] rounded border-none text-white font-bold",onClick:()=>{i!==null?$e(i):f("")},children:t.jsxs("svg",{viewBox:"0 0 1024 1024",fill:"currentColor",height:"1em",width:"1em",children:[t.jsx("defs",{children:t.jsx("style",{})}),t.jsx("path",{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6c-.3 1.5-.4 3-.4 4.4 0 14.4 11.6 26 26 26h723c1.5 0 3-.1 4.4-.4 14.2-2.4 23.7-15.9 21.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"})]})})]},"editable-viewer")}},T=()=>{k<H.length-1&&(O(k+1),C(null),_(null))},M=()=>{k>0&&(O(k-1),C(null),_(null))},L=e=>{S(e.target.value)},oe=()=>{i!==null&&w.trim()!==""&&(d(e=>e.map(a=>a.id===i?y(v({},a),{assign:[...a.assign||[],w]}):a)),S(""))},K=(e,a)=>{const{type:s,value:n,files:r}=e.target;d(l=>l.map(h=>{if(h.id!==a)return h;switch(h.type){case"text":return y(v({},h),{content:n,value:n});case"image":case"v_image":if(r&&r[0]){const x=new FileReader;x.onloadend=()=>{d(j=>j.map(D=>D.id===a?y(v({},D),{content:x.result}):D))},x.readAsDataURL(r[0])}return h;case"checkbox":return y(v({},h),{checked:e.target.checked});case"m_date":case"live_date":case"fix_date":return y(v({},h),{content:n});default:return h}}))},ze=e=>{i!==null&&d(a=>a.map(s=>s.id===i?y(v({},s),{assign:(s.assign||[]).filter(n=>n!==e)}):s))};function He(...e){return a=>{e.forEach(s=>{typeof s=="function"?s(a):s&&"current"in s&&(s.current=a)})}}const Me=e=>{d(a=>a.map(s=>s.id===i?y(v({},s),{content:e,value:e}):s)),C(null),_(null),R(null)},Pe=()=>{C(null)},Ee=(e,a)=>{const s=e.target.checked;d(n=>n.map(r=>r.id===a?y(v({},r),{checked:s}):r))},de=(e,a)=>{const s=e.target.value;d(n=>n.map(r=>r.id===a?y(v({},r),{content:s,value:s}):r))},Oe=({type:e,onClick:a,children:s,title:n})=>{const[{isDragging:r},l]=lt(()=>({type:"component",item:{type:e},collect:j=>({isDragging:!!j.isDragging()})}),[e]),[h,x]=u.useState(!1);return t.jsx("div",{className:"relative inline-block",onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:t.jsx("button",{ref:l,className:`flex justify-center items-center w-[100%] h-[50px] bg-[#283C42] text-white px-4 py-2 cursor-grab rounded border-2 border-transparent transition-transform duration-500 ease-in-out ${r?"shiny-button":""}`,onClick:a,children:t.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:t.jsxs("div",{className:`flip-container ${h?"hovered":""}`,children:[t.jsx("div",{className:"flip-front",children:s}),t.jsx("div",{className:"flip-back",children:t.jsx("span",{children:n})})]})})})})},[,Re]=rt(()=>({accept:"component",drop:(e,a)=>{const s=a.getClientOffset();if(N.current&&s){const n=N.current.getBoundingClientRect(),r={top:s.y-n.top-20,left:s.x-n.left-50};O(l=>(console.log(l,"WWWWWW"),ce(e.type,r,l),l))}}})),ce=(e,a,s)=>{const n={text:{width:100,height:30},v_text:{width:100,height:30},signature:{width:100,height:50},v_signature:{width:100,height:50},image:{width:80,height:80},v_image:{width:80,height:80},checkbox:{width:30,height:30},m_date:{width:100,height:30},live_date:{width:100,height:30},fix_date:{width:100,height:30}},r={id:Date.now(),type:e,pageNo:s,name:`${e}-${Date.now()}`,position:a,size:n[e]||{width:0,height:0},fontSize:e==="text"?14:void 0,value:"",assign:[],content:e==="text"?"":void 0,checked:!1};d(l=>[...l,r])},Te=(e,a,s)=>{d(n=>n.map(r=>r.id===e?y(v({},r),{position:{top:a,left:s}}):r))},he=(e,a,s)=>{d(n=>n.map(r=>r.id===e?y(v({},r),{size:{width:a,height:s}}):r))},Be=e=>{const a=e.target.value;f(a),i!==null&&d(s=>s.map(n=>n.id===i?y(v({},n),{content:a,value:a}):n))},We=e=>{e.target.closest(".component")||(_(null),C(null))},ue=e=>{i!==null&&d(a=>a.map(s=>s.id===i?y(v({},s),{fontSize:(s.fontSize||16)+(e?2:-2)}):s))},ge=()=>{i!==null&&(d(e=>e.filter(a=>a.id!==i)),_(null),C(null))},Ie=()=>U(void 0,null,function*(){try{O(0),d([]),J(dt)}catch(e){console.error("Error loading data:",e)}}),Ae=e=>U(void 0,null,function*(){var s;const a=(s=e.target.files)==null?void 0:s[0];if(a){const n=yield ct(a),r=yield ht(n);J(r),O(0)}});u.useEffect(()=>{if(i!==null){const e=document.querySelector(`[data-id="${i}"]`);C(e);const a=c.find(s=>s.id===i);(a==null?void 0:a.type)==="text"&&f(a.content||"")}},[i,c]),u.useEffect(()=>{if(i!==null){const e=c.find(a=>a.id===i);R(e?{id:e.id,type:e.type,checked:e.checked||!1,content:e.content||""}:null)}},[i,E,c]);const xe=e=>Uint8Array.from(atob(e),a=>a.charCodeAt(0)),Ue=()=>U(void 0,null,function*(){var j,D,B,$,X,Z,ve,ye;const e=yield Se.create();for(let m=0;m<H.length;m++){const W=xe(H[m].data),ee=yield Se.load(W);(yield e.copyPages(ee,ee.getPageIndices())).forEach(A=>e.addPage(A))}const a=c.reduce((m,W)=>(m[W.pageNo]||(m[W.pageNo]=[]),m[W.pageNo].push(W),m),{}),s=e.getPages();for(const m of s){const W=s.indexOf(m),ee=a[W]||[];for(const g of ee){const{left:A,top:te}=g.position;if(g.type==="text"||g.type==="v_text"){const z=(j=g.fontSize)!=null?j:12,P=m.getHeight()-te-z-3;m.drawText(g.content||"",{x:A+3,y:P,size:z,color:V(0,0,0),lineHeight:z*1.2,maxWidth:(B=(D=g.size)==null?void 0:D.width)!=null?B:0})}else if((g.type==="image"||g.type==="v_image"||g.type==="v_signature"||g.type==="signature")&&g.content){const z=g.content.split(",")[1];if(!z){console.error("Invalid image data");continue}const P=xe(z);let F;if(g.content.startsWith("data:image/png"))F=yield e.embedPng(P);else if(g.content.startsWith("data:image/jpeg")||g.content.startsWith("data:image/jpg"))F=yield e.embedJpg(P);else{console.error("Unsupported image format");continue}const{width:we,height:je}=F,Le=(X=($=g.size)==null?void 0:$.width)!=null?X:0,Ve=(ve=(Z=g.size)==null?void 0:Z.height)!=null?ve:0,Ye=Le/we,qe=Ve/je,Ce=Math.min(Ye,qe),Qe=we*Ce,ke=je*Ce,Ge=A,Ke=m.getHeight()-te-ke;m.drawImage(F,{x:Ge,y:Ke,width:Qe,height:ke})}else if(g.type==="checkbox"){const P=m.getHeight()-te-10-5;g.checked?m.drawRectangle({x:A+5,y:P,width:10,height:10,color:V(0,0,0)}):m.drawRectangle({x:A+5,y:P,width:10,height:10,borderColor:V(0,0,0),borderWidth:1,color:V(1,1,1)})}else if(g.type==="m_date"||g.type==="live_date"||g.type==="fix_date"){const z=(ye=g.fontSize)!=null?ye:12,P=m.getHeight()-te-z-3,F=g.content||new Date().toLocaleDateString();m.drawText(F,{x:A+3,y:P,size:z,color:V(0,0,0)})}}}const n=yield e.save(),r=new Blob([n],{type:"application/pdf"}),l=URL.createObjectURL(r),h=`esignDoc-${b.document_title}`,x=document.createElement("a");x.href=l,x.download=`${h}.pdf`,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(l)}),$e=e=>{d(a=>a.map(s=>s.id===e?y(v({},s),{content:void 0,value:void 0}):s))},Fe=(e,a)=>{var n;const s=(n=e.target.files)==null?void 0:n[0];if(s){const r=new FileReader;r.onloadend=()=>{const l=r.result;d(h=>h.map(x=>x.id===a?y(v({},x),{content:l}):x))},r.readAsDataURL(s)}},Je=()=>U(void 0,null,function*(){if(!b||!b.document_title)return;const e=c.map(({id:n,type:r,content:l,pageNo:h,value:x,position:j,size:D,name:B,fontSize:$,assign:X,checked:Z})=>({id:n,type:r,pageNo:h,assign:X,size:D,name:B,fontSize:$,position:j,content:l,value:x,checked:Z})),a=Q.reduce((n,r,l)=>{const h=String(r);return n[l]={email:h,status:"unseen"},n},{}),s={document_title:b.name,document_json_data:JSON.stringify(JSON.stringify(e,null,2)),base_pdf_datad:JSON.stringify(JSON.stringify(H,null,2)),assigned_user_list:JSON.stringify(a,null,2)};try{(yield(yield fetch("/api/method/esign_app.api.update_document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json()).message.status<300?Y.success("Document Updated Successfully",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:q}):Y.error("Error while updating template",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:q})}catch(n){console.error("Error:",n),alert("An error occurred while updating the template")}C(null)});return b?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"text-xs flex items-center gap-3 relative p-6 bg-[#283C42] text-white border-2 border-transparent hover:border-[#283C42] transition-colors duration-300",children:[t.jsx("button",{className:"button",onClick:()=>re(-1),children:t.jsxs("div",{className:"button-box",children:[t.jsx("span",{className:"button-elem",children:t.jsx("svg",{viewBox:"0 0 46 40",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M46 20.038c0-.7-.3-1.5-.8-2.1l-16-17c-1.1-1-3.2-1.4-4.4-.3-1.2 1.1-1.2 3.3 0 4.4l11.3 11.9H3c-1.7 0-3 1.3-3 3s1.3 3 3 3h33.1l-11.3 11.9c-1 1-1.2 3.3 0 4.4 1.2 1.1 3.3.8 4.4-.3l16-17c.5-.5.8-1.1.8-1.9z"})})}),t.jsx("span",{className:"button-elem",children:t.jsx("svg",{viewBox:"0 0 46 40",children:t.jsx("path",{d:"M46 20.038c0-.7-.3-1.5-.8-2.1l-16-17c-1.1-1-3.2-1.4-4.4-.3-1.2 1.1-1.2 3.3 0 4.4l11.3 11.9H3c-1.7 0-3 1.3-3 3s1.3 3 3 3h33.1l-11.3 11.9c-1 1-1.2 3.3 0 4.4 1.2 1.1 3.3.8 4.4-.3l16-17c.5-.5.8-1.1.8-1.9z"})})})]})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-lg font-bold",children:b.document_title}),t.jsx("p",{className:"text-sm",children:b.template_title}),t.jsxs("p",{className:"text-sm",children:["Email: ",b.owner_email]}),t.jsxs("p",{className:"text-sm",children:["Created At: ",le(b.document_created_at).format("DD/MM/YYYY - HH:mm")," (",le().to(le(b.document_created_at)),")"]})]})]}),t.jsxs("div",{className:"templete-main-div",children:[t.jsxs("div",{className:"left-area-div",children:[t.jsxs("div",{className:"control-buttons gap-2 text-xs",children:[t.jsx("input",{type:"file",accept:"application/pdf",onChange:Ae,className:"bg-gray-100 text-[#283C42] border-1 border-[#283C42] px-4 py-2 rounded hover:bg-[#283C42] hover:text-white hover:border-white transition-colors duration-300"}),t.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:Ie,children:"Load Blank Page"}),t.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:Ue,children:"Merge and Print PDF"}),t.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:Je,children:"Save Document"}),t.jsx(ft,{setTarget:C,owner_email:b.owner_email,assigned_user:Q.map(String),template_tite:b.template_title,document_title:b.name})]}),t.jsx("div",{className:"control-buttons-utilities gap-2 text-xs",children:ot.map(({type:e,icon:a,title:s})=>t.jsx(Oe,{type:e,title:s,onClick:()=>ce(e,{top:100,left:100},k),children:a},e))})]}),t.jsxs("div",{className:"templete-app text-xs",children:[t.jsxs("div",{className:"flex gap-3 mb-2",children:[t.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:M,disabled:k===0,children:"Previous"}),t.jsxs("h1",{className:"mt-2",children:[k+1," / ",H.length]}),t.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:T,disabled:k===H.length-1,children:"Next"})]}),t.jsxs("div",{className:"workspace",ref:He(N,Re),onClick:We,children:[t.jsx(gt,{pdfData:H[k].data}),c.filter(e=>e.pageNo===k).map(e=>{var a,s,n,r;return t.jsxs("div",{"data-id":e.id,className:`component ${e.type} ${i===e.id?"selected":""}`,style:{position:"absolute",top:e.position.top,left:e.position.left,width:(s=(a=e.size)==null?void 0:a.width)!=null?s:0,height:(r=(n=e.size)==null?void 0:n.height)!=null?r:0,border:i===e.id?"1px solid red":"none",fontSize:`${e.fontSize}px`,userSelect:"none",overflow:"hidden"},onClick:l=>{l.stopPropagation(),_(e.id)},children:[e.type==="text"&&t.jsx("div",{style:{width:"100%",height:"100%",overflow:"hidden",fontSize:"inherit",outline:"none"},children:e.value||"Editable Text"}),e.type==="image"&&!e.content&&t.jsx("div",{}),e.type==="v_image"&&!e.content&&t.jsx("div",{}),(e.type==="image"||e.type==="v_image"||e.type==="signature"||e.type==="v_signature")&&e.content&&t.jsx("img",{src:e.content,alt:"Uploaded",style:{width:"100%",height:"100%"}}),e.type==="checkbox"&&t.jsx("input",{type:"checkbox",checked:e.checked||!1,onChange:l=>K(l,e.id)}),e.type==="m_date"&&t.jsx("input",{type:"date",value:e.content||"",onChange:l=>K(l,e.id)}),e.type==="live_date"&&t.jsx("input",{type:"date",value:new Date().toISOString().split("T")[0],onChange:l=>K(l,e.id)}),e.type==="fix_date"&&t.jsx("input",{type:"date",value:e.content||"",onChange:l=>K(l,e.id)}),e.type==="v_text"&&t.jsx("div",{children:e.content||"Editable Text"})]},e.id)}),t.jsx(it,{ref:se,target:E,resizable:!0,draggable:!0,ables:[p],props:{editable:!0},bounds:{left:0,top:0,right:((pe=N.current)==null?void 0:pe.offsetWidth)||0,bottom:((me=N.current)==null?void 0:me.offsetHeight)||0},onDrag:e=>{var x,j;const a=((x=N.current)==null?void 0:x.offsetWidth)||0,s=((j=N.current)==null?void 0:j.offsetHeight)||0,n=e.target.clientWidth||0,r=e.target.clientHeight||0,l=Math.max(0,Math.min(e.top,s-r)),h=Math.max(0,Math.min(e.left,a-n));i!==null&&Te(i,l,h)},onResize:e=>{var l,h;const a=((l=N.current)==null?void 0:l.offsetWidth)||0,s=((h=N.current)==null?void 0:h.offsetHeight)||0,n=Math.max(0,Math.min(e.width,a)),r=Math.max(0,Math.min(e.height,s));e.target.style.width=`${n}px`,e.target.style.height=`${r}px`,i!==null&&he(i,n,r)},onScale:e=>{var r,l,h,x,j,D;const a=((r=N.current)==null?void 0:r.offsetWidth)||0,s=((l=N.current)==null?void 0:l.offsetHeight)||0,n=c.find(B=>B.id===i);if(n){const B=Math.max(0,Math.min((x=(h=n.size)==null?void 0:h.width)!=null?x:1*e.scale[0],a)),$=Math.max(0,Math.min((D=(j=n.size)==null?void 0:j.height)!=null?D:1*e.scale[1],s));he(i,B,$)}}})]})]}),t.jsxs("div",{className:"right-templete",children:[t.jsxs("div",{className:"templete-utility-btn mt-2 text-xs pr-20",children:[i&&((o==null?void 0:o.type)==="signature"||(o==null?void 0:o.type)==="v_signature")&&t.jsx(xt,{onSelect:Me,onClickbtn:Pe}),i&&((o==null?void 0:o.type)==="image"||(o==null?void 0:o.type)==="v_image")&&t.jsx("input",{type:"file",accept:"image/*",onChange:e=>Fe(e,i)}),i&&(o==null?void 0:o.type)==="checkbox"&&t.jsx("input",{type:"checkbox",checked:o.checked||!1,onChange:e=>Ee(e,i)}),i&&(o==null?void 0:o.type)==="m_date"&&t.jsx("input",{type:"date",value:o.content||"",onChange:e=>de(e,i)}),i&&(o==null?void 0:o.type)==="live_date"&&t.jsx("input",{type:"date",value:new Date().toISOString().split("T")[0],readOnly:!0}),i&&(o==null?void 0:o.type)==="fix_date"&&t.jsx("input",{type:"date",value:o.content||"",onChange:e=>de(e,i)}),i&&((o==null?void 0:o.type)==="text"||(o==null?void 0:o.type)==="v_text")&&t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:()=>ue(!0),children:"Increase Text Size"}),t.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:()=>ue(!1),children:"Decrease Text Size"}),t.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:ge,children:"Delete Component"}),t.jsx("input",{className:"bg-[#d1e0e4] text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full appearance-none",ref:ae,type:"text",value:I,onChange:Be,placeholder:"Edit text here"})]})]}),i&&(o==null?void 0:o.type)!=="v_text"&&(o==null?void 0:o.type)!=="v_signature"&&(o==null?void 0:o.type)!=="v_image"&&(o==null?void 0:o.type)!=="fix_date"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"templete-utility-btn-add-user flex m-3 gap-3 text-xs pr-10 ml-0",children:[t.jsx("input",{className:"mt-3 bg-[#d1e0e4]  text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full appearance-none",type:"text",value:w,onChange:L,placeholder:"Add user"}),t.jsx("button",{className:"mt-3  bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:oe,children:"Add"})]}),t.jsx("div",{children:t.jsx("ul",{className:"list-none p-0 m-0 pr-10",children:(be=(fe=c.find(e=>e.id===i))==null?void 0:fe.assign)==null?void 0:be.map((e,a)=>t.jsxs("li",{className:"mr-3 flex items-center justify-between p-2 border-b border-gray-200 hover:bg-gray-100",children:[t.jsx("span",{className:"text-xs text-gray-800 overflow-hidden ",children:e}),t.jsx("button",{onClick:()=>ze(e),className:"flex items-center justify-center w-8 h-8 bg-red-500 text-white rounded-full hover:bg-red-600","aria-label":"Remove user",children:t.jsx("svg",{viewBox:"0 0 1024 1024",fill:"currentColor",height:"1em",width:"1em",children:t.jsx("path",{d:"M678.3 655.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 518 759.6 444.7 759.6 362c0-137-110.8-248-247.5-248S264.7 225 264.7 362c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 901.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 641.2 432.2 610 512.2 610c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 534c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 362c0-45.9 17.9-89.1 50.3-121.6S466.3 190 512.2 190s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 362c0 45.9-17.9 89.1-50.3 121.6C601.1 516.1 558 534 512.2 534zM880 772H640c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h240c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"})})})]},a))})})]})]})]}),t.jsx(nt,{limit:1})]}):t.jsx("div",{children:"No Doc data available"})};export{zt as default};
