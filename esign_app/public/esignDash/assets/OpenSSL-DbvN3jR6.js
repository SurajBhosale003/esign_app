const __vite__fileDeps=["assets/OpenSSLAllList-SRetwGsu.js","assets/index-0nKeV5mV.js","assets/index-8RWNb1Am.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var D=Object.defineProperty,F=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var L=(o,s,t)=>s in o?D(o,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[s]=t,x=(o,s)=>{for(var t in s||(s={}))M.call(s,t)&&L(o,t,s[t]);if(k)for(var t of k(s))R.call(s,t)&&L(o,t,s[t]);return o},g=(o,s)=>F(o,B(s));var j=(o,s,t)=>new Promise((l,u)=>{var f=i=>{try{m(t.next(i))}catch(p){u(p)}},v=i=>{try{m(t.throw(i))}catch(p){u(p)}},m=i=>i.done?l(i.value):Promise.resolve(i.value).then(f,v);m((t=t.apply(o,s)).next())});import{r as c,c as E,i as T,e as V,j as e,_ as H}from"./index-0nKeV5mV.js";import{Q as $,B as y,Y as S}from"./react-toastify.esm-Dgz2zfA7.js";import{M as I}from"./index-gDlXHgX-.js";import"./PurePanel-BDIKaUYK.js";const J=({onAdd:o})=>{const[s,t]=c.useState(!1),[l,u]=c.useState({country:"",state:"",location:"",organization:"",challenge_password:"",countryCode:"",username:"",email:"",openssl_name:""}),[f,v]=c.useState([]),[m,i]=c.useState([]),[p,b]=c.useState(!1),C=E(T),w=E(V);c.useEffect(()=>{u(r=>g(x({},r),{username:C,email:w}));function a(){return j(this,null,function*(){try{const n=(yield(yield fetch("https://restcountries.com/v3.1/all?fields=name,cca2")).json()).map(d=>({name:d.name.common,code:d.cca2})).sort((d,A)=>d.name.localeCompare(A.name));v(n),i(n)}catch(r){y.error("Error fetching countries!",{transition:S})}})}a()},[C,w]);const P=()=>{t(!0)},O=()=>{u({country:"",state:"",location:"",organization:"",challenge_password:"",countryCode:"",username:C,email:w,openssl_name:""})},_=()=>{t(!1),O()},z=()=>j(void 0,null,function*(){b(!0),console.log(l);try{const r=yield(yield fetch("/api/method/esign_app.api.genrate_and_store_keys",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).json();console.log(r),r.message.status<300?(y.success("OpenSSL created Successfully",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:S}),o(),t(!1),b(!1),O()):(y.error("Error while creating OpenSSL",{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:S}),b(!0))}catch(a){console.error("Error:",a),alert("An error occurred while saving the templete")}b(!1)}),N=a=>{const{name:r,value:h}=a.target;if(!(r==="challenge_password"&&!/^[A-Za-z0-9]*$/.test(h))&&(u(n=>g(x({},n),{[r]:h})),r==="country")){const n=f.find(d=>d.name===h);u(d=>g(x({},d),{countryCode:n?n.code:""}))}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:P,children:"Add OpenSSL"})}),e.jsx(I,{title:"Add Template",open:s,onCancel:_,rootClassName:"glass-modal",footer:[e.jsxs("div",{className:"flex justify-end gap-2 px-4 pb-4",children:[e.jsx("button",{disabled:p,className:"bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] transition-colors duration-300",onClick:z,children:"Save"}),e.jsx("button",{className:"bg-[#283C42] text-white px-4 py-2 rounded border-2 border-transparent hover:border-[#ca2424] hover:bg-white hover:text-[#ca2424] transition-colors duration-300",onClick:_,children:"Cancel"})]},"footer-buttons")],children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 px-2 pb-2 text-white",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold mb-1",children:"Country"}),e.jsxs("select",{name:"country",value:l.country,onChange:N,className:"w-full bg-white/20 text-white placeholder:text-white/60 backdrop-blur-md border border-white/30 rounded py-2 px-3 text-sm",children:[e.jsx("option",{value:"",children:"Select Country"}),m.map(a=>e.jsx("option",{value:a.name,children:a.name},a.code))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold mb-1",children:"Country Code"}),e.jsx("input",{type:"text",name:"countryCode",value:l.countryCode,readOnly:!0,className:"w-full bg-white/10 text-white backdrop-blur border border-white/30 rounded py-2 px-3 text-sm"})]}),[{label:"OpenSSL Name",name:"openssl_name"},{label:"State/Province",name:"state"},{label:"Location",name:"location"},{label:"Organization",name:"organization"},{label:"Challenge Password",name:"challenge_password",placeholder:"Ex. Pass123"},{label:"Username",name:"username",readOnly:!0},{label:"Email",name:"email",readOnly:!0}].map(({label:a,name:r,placeholder:h,readOnly:n})=>e.jsxs("div",{className:r==="organization"?"md:col-span-2":"",children:[e.jsx("label",{className:"block text-xs font-semibold mb-1",children:a}),e.jsx("input",{type:"text",name:r,value:l[r],placeholder:h,onChange:N,readOnly:n,className:`w-full ${n?"bg-white/10":"bg-white/20"} text-white placeholder:text-white/60 backdrop-blur-md border border-white/30 rounded py-2 px-3 text-sm`})]},r))]})}),e.jsx($,{limit:1})]})},Q=c.lazy(()=>H(()=>import("./OpenSSLAllList-SRetwGsu.js"),__vite__mapDeps([0,1,2])));function K(){const[o,s]=c.useState(!1),t=()=>{s(l=>!l)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(J,{onAdd:t})}),e.jsx("div",{children:e.jsx(c.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(Q,{refresh:o})})})]})}export{K as default};
