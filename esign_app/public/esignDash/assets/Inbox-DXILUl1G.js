var f=(m,i,d)=>new Promise((g,u)=>{var p=e=>{try{l(d.next(e))}catch(a){u(a)}},x=e=>{try{l(d.throw(e))}catch(a){u(a)}},l=e=>e.done?g(e.value):Promise.resolve(e.value).then(p,x);l((d=d.apply(m,i)).next())});import{u as j,e as N,f as _,r as c,j as t}from"./index-CvZQwJ2C.js";import{Q as D}from"./react-toastify.esm-ZhgozERE.js";const k=()=>{const m=j(),i=N(_),[d,g]=c.useState([]),[u,p]=c.useState(!0),[x,l]=c.useState(null),[e,a]=c.useState("all"),w=s=>{m(`/signer/${s.name}`,{state:{documentData:s}})};if(c.useEffect(()=>{i&&f(void 0,null,function*(){try{const r=yield fetch(`/api/method/esign_app.api.get_documents_by_user?user_mail=${i}`,{method:"GET",headers:{"Content-Type":"application/json"}}),o=yield r.json();r.status===200?o.message.data.length>0?g(o.message.data):l("No documentData found"):l("Failed to fetch documentData")}catch(r){l("An error occurred while fetching documentData")}finally{p(!1)}})},[i]),u)return t.jsx("div",{children:"Loading..."});if(x)return t.jsx("div",{children:x});const b=s=>{try{return JSON.parse(s)}catch(r){return console.error("Failed to parse assigned_users:",r),{}}},y=d.filter(s=>{var n;const r=b(s.assigned_users),o=(n=Object.values(r).find(h=>h.email===i))==null?void 0:n.status;return e==="all"||e==="unseen"&&o==="unseen"||e==="opened"&&o==="open"||e==="completed"&&o==="close"});return t.jsxs("div",{className:"relative mt-6 min-w-[1000px] max-w-[1000px] mx-auto",children:[t.jsxs("div",{className:"mb-4 flex gap-1",children:[t.jsx("button",{onClick:()=>a("all"),className:`text-sm px-4 py-2 transition-all duration-200 ease-in-out ${e==="all"?"bg-[#283C42] text-white shadow-lg":"bg-white text-gray-700 border border-gray-300"} rounded-l-md hover:bg-[#283C42] hover:text-white hover:shadow-xl hover:translate-y-[-2px]`,children:"All"}),t.jsx("button",{onClick:()=>a("opened"),className:`text-sm px-4 py-2 transition-all duration-200 ease-in-out ${e==="opened"?"bg-[#283C42] text-white shadow-lg":"bg-white text-gray-700 border border-gray-300"} hover:bg-[#283C42] hover:text-white hover:shadow-xl hover:translate-y-[-2px]`,children:"Opened"}),t.jsx("button",{onClick:()=>a("completed"),className:`text-sm px-4 py-2 transition-all duration-200 ease-in-out ${e==="completed"?"bg-[#283C42] text-white shadow-lg":"bg-white text-gray-700 border border-gray-300"} hover:bg-[#283C42] hover:text-white hover:shadow-xl hover:translate-y-[-2px]`,children:"Completed"}),t.jsx("button",{onClick:()=>a("unseen"),className:`text-sm px-4 py-2 transition-all duration-200 ease-in-out ${e==="unseen"?"bg-[#283C42] text-white shadow-lg":"bg-white text-gray-700 border border-gray-300"} rounded-r-md hover:bg-[#283C42] hover:text-white hover:shadow-xl hover:translate-y-[-2px]`,children:"Unseen"})]}),t.jsx("div",{className:"flex flex-wrap gap-5",children:y.map((s,r)=>{var v;const o=b(s.assigned_users),n=(v=Object.values(o).find(C=>C.email===i))==null?void 0:v.status;let h="";return n==="unseen"?h="bg-[#283C42] text-white border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] relative":n==="open"?h="bg-[#283C42] text-white border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42]":n==="close"&&(h="bg-[#283C42] text-white border-transparent hover:border-[#283C42] hover:bg-white hover:text-[#283C42] opacity-50"),t.jsx("div",{className:"mt-2 flex w-[200px]",children:t.jsxs("div",{className:`p-4 rounded border-2 transition-colors duration-300 cursor-pointer ${h}`,style:{width:"350px",height:"100px"},onClick:()=>w(s),children:[t.jsx("h3",{className:`mt-2 font-bold ${n==="close"?"line-through":""}`,children:s.document_title}),t.jsx("p",{className:"text-sm",children:new Date(s.document_created_at).toLocaleString()}),n==="unseen"&&t.jsx("div",{className:"absolute top-2 right-2 w-3 h-3 bg-yellow-500 rounded-full shadow-md"})]})},r)})}),t.jsx(D,{})]})};export{k as default};
